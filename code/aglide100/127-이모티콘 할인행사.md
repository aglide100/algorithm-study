# 프로그래머스, 이모티콘 할인행사

> 출처: https://school.programmers.co.kr/learn/courses/30/lessons/150368

## 문제 설명

카카오톡에서는 이모티콘을 무제한으로 사용할 수 있는 이모티콘 플러스 서비스 가입자 수를 늘리려고 합니다.  
이를 위해 카카오톡에서는 이모티콘 할인 행사를 하는데, 목표는 다음과 같습니다.

1.  이모티콘 플러스 서비스 가입자를 최대한 늘리는 것.
2.  이모티콘 판매액을 최대한 늘리는 것.

**1번 목표가 우선이며, 2번 목표가 그 다음입니다.**

이모티콘 할인 행사는 다음과 같은 방식으로 진행됩니다.

-   `n`명의 카카오톡 사용자들에게 이모티콘 `m`개를 할인하여 판매합니다.
-   이모티콘마다 할인율은 다를 수 있으며, 할인율은 10%, 20%, 30%, 40% 중 하나로 설정됩니다.

카카오톡 사용자들은 다음과 같은 기준을 따라 이모티콘을 사거나, 이모티콘 플러스 서비스에 가입합니다.

-   각 사용자들은 자신의 기준에 따라 일정 비율 이상 할인하는 이모티콘을 모두 구매합니다.
-   각 사용자들은 자신의 기준에 따라 이모티콘 구매 비용의 합이 일정 가격 이상이 된다면, 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.

다음은 2명의 카카오톡 사용자와 2개의 이모티콘이 있을때의 예시입니다.

| 사용자 | 비율 | 가격   |
| ------ | ---- | ------ |
| 1      | 40   | 10,000 |
| 2      | 25   | 10,000 |

| 이모티콘 | 가격  |
| -------- | ----- |
| 1        | 7,000 |
| 2        | 9,000 |

1번 사용자는 40%이상 할인하는 이모티콘을 모두 구매하고, 이모티콘 구매 비용이 10,000원 이상이 되면 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.  
2번 사용자는 25%이상 할인하는 이모티콘을 모두 구매하고, 이모티콘 구매 비용이 10,000원 이상이 되면 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.

1번 이모티콘의 가격은 7,000원, 2번 이모티콘의 가격은 9,000원입니다.

만약, 2개의 이모티콘을 모두 40%씩 할인한다면, 1번 사용자와 2번 사용자 모두 1,2번 이모티콘을 구매하게 되고, 결과는 다음과 같습니다.

| 사용자 | 구매한 이모티콘 | 이모티콘 구매 비용 | 이모티콘 플러스 서비스 가입 여부 |
| ------ | --------------- | ------------------ | -------------------------------- |
| 1      | 1, 2            | 9,600              | X                                |
| 2      | 1, 2            | 9,600              | X                                |

이모티콘 플러스 서비스 가입자는 0명이 늘어나고 이모티콘 판매액은 19,200원이 늘어납니다.

하지만, 1번 이모티콘을 30% 할인하고 2번 이모티콘을 40% 할인한다면 결과는 다음과 같습니다.

| 사용자 | 구매한 이모티콘 | 이모티콘 구매 비용 | 이모티콘 플러스 서비스 가입 여부 |
| ------ | --------------- | ------------------ | -------------------------------- |
| 1      | 2               | 5,400              | X                                |
| 2      | 1, 2            | 10,300             | O                                |

2번 사용자는 이모티콘 구매 비용을 10,000원 이상 사용하여 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입하게 됩니다.  
따라서, 이모티콘 플러스 서비스 가입자는 1명이 늘어나고 이모티콘 판매액은 5,400원이 늘어나게 됩니다.

카카오톡 사용자 `n`명의 구매 기준을 담은 2차원 정수 배열 `users`, 이모티콘 `m`개의 정가를 담은 1차원 정수 배열 `emoticons`가 주어집니다. 이때, 행사 목적을 최대한으로 달성했을 때의 이모티콘 플러스 서비스 가입 수와 이모티콘 매출액을 1차원 정수 배열에 담아 return 하도록 solution 함수를 완성해주세요.

---

##### 제한사항

-   1 ≤ `users`의 길이 = `n` ≤ 100
    -   `users`의 원소는 \[`비율`, `가격`\]의 형태입니다.
    -   `users[i]`는 `i+1`번 고객의 구매 기준을 의미합니다.
    -   `비율`% 이상의 할인이 있는 이모티콘을 모두 구매한다는 의미입니다.
        -   1 ≤ `비율` ≤ 40
    -   `가격`이상의 돈을 이모티콘 구매에 사용한다면, 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입한다는 의미입니다.
        -   100 ≤ `가격` ≤ 1,000,000
        -   `가격`은 100의 배수입니다.
-   1 ≤ `emoticons`의 길이 = `m` ≤ 7
    -   `emoticons[i]`는 `i+1`번 이모티콘의 정가를 의미합니다.
    -   100 ≤ `emoticons`의 원소 ≤ 1,000,000
    -   `emoticons`의 원소는 100의 배수입니다.

---

##### 입출력 예

| users                                                                                                | emoticons                  | result       |
| ---------------------------------------------------------------------------------------------------- | -------------------------- | ------------ |
| \[\[40, 10000\], \[25, 10000\]\]                                                                     | \[7000, 9000\]             | \[1, 5400\]  |
| \[\[40, 2900\], \[23, 10000\], \[11, 5200\], \[5, 5900\], \[40, 3100\], \[27, 9200\], \[32, 6900\]\] | \[1300, 1500, 1600, 4900\] | \[4, 13860\] |

---

##### 입출력 예 설명

**입출력 예 #1**

문제의 예시와 같습니다.

**입출력 예 #2**

다음과 같이 할인하는 것이 이모티콘 플러스 서비스 가입자를 최대한 늘리면서, 이모티콘 판매액 또한 최대로 늘리는 방법입니다.

| 이모티콘 | 할인율 |
| -------- | ------ |
| 1        | 40     |
| 2        | 40     |
| 3        | 20     |
| 4        | 40     |

위와 같이 할인하면 4명의 이모티콘 플러스 가입자와 13,860원의 판매액을 달성할 수 있습니다. 다른 할인율을 적용하여 이모티콘을 판매할 수 있지만 이보다 이모티콘 플러스 서비스 가입자를 최대한 늘리면서, 이모티콘 판매액 또한 최대로 늘리는 방법은 없습니다.  
따라서, \[4, 13860\]을 return 하면 됩니다.

# 문제 접근

할인액이니 총 판매수량이니 가입자니 신경쓰이는게 많지만 하나씩 처리하면 의외로 쉽게 문제가 풀린다

우선 문제에서도 적혀있는데 가장 중요한 목표는 플러스 가입자가 1순위이고 2순위가 판매금액이다.

여기서 플러스 가입자가 되기 위해서는 많이 팔아서 금액이 user의 threshold를 넘기면 되는데 유저는 특정 할인% 이상이 아니면 사지 않는다고 한다.

즉, 플러스 가입자가 최대한일때 할인율을 줄이면서 찾는 것이 문제의 해결 방안이 된다.

그래서 좀 무식하긴하지만 그냥 할인액에 대해서 재귀를 돌렸더니 답을 찾기는 했지만 아무리 문제가 시간제한이 널널하다고는 해도 9번부터 초과가 되었지만

그냥 메모이제이션을 넣으니 좀 허무하게 통과가 되었다...

우선 코드 설명을 하자면

1. user의 %기준을 10,20,30,40에 맞춤 (내가 낼 수 있는 할인율이 10,20,30,40임)
2. 정렬 후 user중 가장 할인율이 적은 값을 찾음, 2번의 목표를 맞추기 위해서는 많이 팔아야하는데 최소 기준임 (어차피 완전탐색이기에 사실 안해도 된다고 생각함)
3. discount_list에서 10을 더하면서 계속 재귀 호출함
4. 비교 후 제출

순이다.

# 문제 풀이 코드

java

```java
import java.util.*;

class Solution {
    static HashMap<String, int[]> memo;
    public int[] solution(int[][] users, int[] emoticons) {
        memo = new HashMap();

        // 포멧에 맞게 변경
        for (int i=0; i<users.length; i++) {
            if (users[i][0] % 10 > 0) {
                users[i][0] = users[i][0] - users[i][0] % 10 + 10;
            }
        }

        Arrays.sort(users, (o1, o2) -> {
            return o1[0] - o2[0];
        });

        int[] discount_list = new int[emoticons.length];
        // 판매액을 늘리기 위해서는 누군가는 사줘야함, 일단 제일 작은 할인부터 시작
        Arrays.fill(discount_list, users[0][0]);

        return find(users, emoticons, discount_list);
    }

    public int discount(int price, int percent) {
        return (int)(price - (price * percent * 0.01));
    }

    public int[] find(int[][] users, int[] emoticons, int[] discount_list) {
        int[] price_list = new int[emoticons.length];
        int idx = 0;

        String key = Arrays.toString(discount_list);
        if (memo.containsKey(key)) {
            return memo.get(key);
        }

        for (int e:emoticons) {
            price_list[idx] = discount(e, discount_list[idx]);
            idx++;
        }

        int cnt = 0;
        int sells = 0;
        for (int[] user:users) {
            int sum = 0;
            for (int i=0; i<discount_list.length; i++) {
                if (discount_list[i] >= user[0]) {
                    sum += price_list[i];
                }
            }

            if (sum >= user[1]) {
                cnt++;
            } else {
                sells += sum;
            }
        }

        int[] result = new int[] {cnt, sells};

        for (int i=0; i<discount_list.length; i++) {
            if (discount_list[i] == 40) {
                continue;
            }

            discount_list[i] += 10;
            int[] tmp = find(users, emoticons, discount_list);

            if (result[0] < tmp[0]) {
                result = tmp;
            } else if (result[0] == tmp[0] && result[1] < tmp[1]) {
                result = tmp;
            }

            discount_list[i] -= 10;
        }

        memo.put(key, result);

        return result;
    }
}
```
